<mat-table class='mat-elevation-z8' [dataSource]="dataSource" aria-labelledby="tableLabel">
  <ng-container matColumnDef="VendaId">
    <mat-header-cell *matHeaderCellDef> Nº da Venda </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.vendaId }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="Cliente">
    <mat-header-cell *matHeaderCellDef> Cliente </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.cliente.nome }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="DataCompetencia">
    <mat-header-cell *matHeaderCellDef> Data da Competência </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.dataCompetencia | date: 'MM/yyyy'}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="DataVencimento">
    <mat-header-cell *matHeaderCellDef> Data de Vencimento </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.dataVencimento | date: 'dd/MM/yyyy' }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="DataConta">
    <mat-header-cell *matHeaderCellDef> Data de Conta </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.dataConta | date: 'MM/yyyy'}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="Parcela">
    <mat-header-cell *matHeaderCellDef> Parcela </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ conta.parcela }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="Valor">
    <mat-header-cell *matHeaderCellDef> Valor </mat-header-cell>
    <mat-cell *matCellDef="let conta"> {{ formatarValorParaExibicao(conta.valor) }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="Botoes">
    <mat-header-cell *matHeaderCellDef> </mat-header-cell>
    <mat-cell *matCellDef="let conta">
      <button *ngIf="conta.status !== 'Fechada'" (click)="baixaTotal(conta)" class="btn btn-outline-primary" type="button" style="margin-right:8px"> Dar baixa <i class="bi bi-cash" style="margin-left:3px"></i> </button>
      <button *ngIf="conta.status !== 'Fechada'" (click)="baixaParcial(conta)" class="btn btn-outline-warning" type="button" style="margin-right: 8px"> Baixa parcial  <i class="bi bi-list" style="margin-left:3px"> </i> </button>
      <button (click)="excluir(conta.id)" class="btn btn-outline-danger" type="button"> Excluir <i class="bi bi-trash" style="margin-left:3px"></i> </button>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
</mat-table>

<ng-template #modalBaixa let-modalBaixa>

  <div *ngIf="contaAReceber">
    <div class="modal-header">
      <h4 class="modal-title">Conta Nº- {{contaAReceber.id}} </h4>
      <button type="button" class="close" (click)="modalBaixa.dismiss('Cross click')">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <div class="form-input" style="margin-bottom:10px">
        <label for="quantidade">Quantidade a ser paga:</label>
        <input type="text" name="preco" [(ngModel)]="valorAbate" currencyMask [options]="{ prefix: 'R$ ', thousands: '.', decimal: ',', align: 'left'}">
      </div>
      <div style="display:flex; width:auto; justify-content:center; align-content:center;">
        <button class="btn btn-secundary" type="button" (click)="abaterValor()">Dar Baixa</button>
      </div>
      <div class="form-input" style="margin-bottom:10px">
        <label for="quantidade">Valor da conta: {{formatarValorParaExibicao(contaAReceber.valor)}}</label>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" type="button" (click)="baixa()">Salvar</button>
    </div>
  </div>
</ng-template>
